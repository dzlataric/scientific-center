<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_03r4mnm" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.5.0">
  <bpmn:process id="user-registration" isExecutable="true">
    <bpmn:startEvent id="StartRegistration">
      <bpmn:outgoing>SequenceFlow_1d3hnwc</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="enterRegistrationInfo" name="Enter registration info">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="username" label="Username" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
              <camunda:constraint name="minlength" config="6" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="password" label="Password" type="password">
            <camunda:validation>
              <camunda:constraint name="required" />
              <camunda:constraint name="minlength" config="8" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="firstName" label="First name" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="lastName" label="Last name" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="country" label="Country" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="city" label="City" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="email" label="Email" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="reviewer" label="Reviewer" type="boolean" />
        </camunda:formData>
        <camunda:taskListener class="com.scientific.center.registration.RegistrationInitializer" event="create" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1d3hnwc</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_16a06i4</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_1d3hnwc" sourceRef="StartRegistration" targetRef="enterRegistrationInfo" />
    <bpmn:sequenceFlow id="SequenceFlow_16a06i4" sourceRef="enterRegistrationInfo" targetRef="validateRegistrationInfo" />
    <bpmn:serviceTask id="validateRegistrationInfo" name="Validate registration info" camunda:class="com.scientific.center.registration.RegistrationValidator">
      <bpmn:incoming>SequenceFlow_16a06i4</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_13u9diy</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="sendRegistrationEmail" name="Send registration email" camunda:class="com.scientific.center.registration.SendRegistrationEmail">
      <bpmn:incoming>SequenceFlow_13u9diy</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_039gqrh</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="confirmRegistration" name="Confirm registration">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="username" label="Username" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="password" label="Password" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="email" label="Email" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="firstName" label="First Name" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="lastName" label="Last Name" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="country" label="Country" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="city" label="City" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="reviewer" label="Reviewer" type="boolean">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_039gqrh</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0c8g8f8</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_039gqrh" sourceRef="sendRegistrationEmail" targetRef="confirmRegistration" />
    <bpmn:serviceTask id="enableUserAccount" name="Enable user account" camunda:class="com.scientific.center.registration.EnableUserAccount">
      <bpmn:incoming>SequenceFlow_0c8g8f8</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0lrukc2</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_0c8g8f8" sourceRef="confirmRegistration" targetRef="enableUserAccount" />
    <bpmn:endEvent id="EndEvent_0clnlf5">
      <bpmn:incoming>SequenceFlow_0did5va</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_067mtij</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="confirmReviewer" name="Confirm reviewer" camunda:assignee="admin">
      <bpmn:incoming>SequenceFlow_0p2etu2</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0vsfnrk</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_13u9diy" sourceRef="validateRegistrationInfo" targetRef="sendRegistrationEmail" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_1yqxh2l">
      <bpmn:incoming>SequenceFlow_0lrukc2</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0did5va</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0p2etu2</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0lrukc2" sourceRef="enableUserAccount" targetRef="ExclusiveGateway_1yqxh2l" />
    <bpmn:sequenceFlow id="SequenceFlow_0did5va" sourceRef="ExclusiveGateway_1yqxh2l" targetRef="EndEvent_0clnlf5">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!reviewer}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0p2etu2" sourceRef="ExclusiveGateway_1yqxh2l" targetRef="confirmReviewer">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${reviewer}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="enableReviewerAccount" name="Enable reviewer account" camunda:class="com.scientific.center.registration.EnableReviewerAccount">
      <bpmn:incoming>SequenceFlow_0vsfnrk</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_067mtij</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_0vsfnrk" sourceRef="confirmReviewer" targetRef="enableReviewerAccount" />
    <bpmn:sequenceFlow id="SequenceFlow_067mtij" sourceRef="enableReviewerAccount" targetRef="EndEvent_0clnlf5" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="user-registration">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartRegistration">
        <dc:Bounds x="179" y="80" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_0l5iahk_di" bpmnElement="enterRegistrationInfo">
        <dc:Bounds x="270" y="58" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1d3hnwc_di" bpmnElement="SequenceFlow_1d3hnwc">
        <di:waypoint x="215" y="98" />
        <di:waypoint x="270" y="98" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_16a06i4_di" bpmnElement="SequenceFlow_16a06i4">
        <di:waypoint x="370" y="98" />
        <di:waypoint x="450" y="98" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1ckvssj_di" bpmnElement="validateRegistrationInfo">
        <dc:Bounds x="450" y="58" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_1upfsxo_di" bpmnElement="sendRegistrationEmail">
        <dc:Bounds x="620" y="58" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_04xvpei_di" bpmnElement="confirmRegistration">
        <dc:Bounds x="770" y="58" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_039gqrh_di" bpmnElement="SequenceFlow_039gqrh">
        <di:waypoint x="720" y="98" />
        <di:waypoint x="770" y="98" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0b9luaw_di" bpmnElement="enableUserAccount">
        <dc:Bounds x="770" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0c8g8f8_di" bpmnElement="SequenceFlow_0c8g8f8">
        <di:waypoint x="820" y="138" />
        <di:waypoint x="820" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_0clnlf5_di" bpmnElement="EndEvent_0clnlf5">
        <dc:Bounds x="179" y="222" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_10bhmd1_di" bpmnElement="confirmReviewer">
        <dc:Bounds x="450" y="330" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_13u9diy_di" bpmnElement="SequenceFlow_13u9diy">
        <di:waypoint x="550" y="98" />
        <di:waypoint x="620" y="98" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_1yqxh2l_di" bpmnElement="ExclusiveGateway_1yqxh2l" isMarkerVisible="true">
        <dc:Bounds x="475" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0lrukc2_di" bpmnElement="SequenceFlow_0lrukc2">
        <di:waypoint x="770" y="240" />
        <di:waypoint x="525" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0did5va_di" bpmnElement="SequenceFlow_0did5va">
        <di:waypoint x="475" y="240" />
        <di:waypoint x="215" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0p2etu2_di" bpmnElement="SequenceFlow_0p2etu2">
        <di:waypoint x="500" y="265" />
        <di:waypoint x="500" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1ua8w1v_di" bpmnElement="enableReviewerAccount">
        <dc:Bounds x="147" y="330" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0vsfnrk_di" bpmnElement="SequenceFlow_0vsfnrk">
        <di:waypoint x="450" y="370" />
        <di:waypoint x="247" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_067mtij_di" bpmnElement="SequenceFlow_067mtij">
        <di:waypoint x="197" y="330" />
        <di:waypoint x="197" y="258" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
